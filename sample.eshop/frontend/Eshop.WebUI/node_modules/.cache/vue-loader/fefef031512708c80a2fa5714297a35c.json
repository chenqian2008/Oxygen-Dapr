{"remainingRequest":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\src\\view\\manager\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\src\\view\\manager\\detail.vue","mtime":1578132772179},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBnbG9iYWwgZnJvbSAiLi4vY29tbW9uIjsKaW1wb3J0IHsgQnV0dG9uLCBOYXZCYXIsIFJvdywgQ29sLCBDZWxsLCBDZWxsR3JvdXAsIEZpZWxkLCBUb2FzdCwgVXBsb2FkZXIgfSBmcm9tICJ2YW50IjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFtCdXR0b24ubmFtZV06IEJ1dHRvbiwKICAgIFtOYXZCYXIubmFtZV06IE5hdkJhciwKICAgIFtSb3cubmFtZV06IFJvdywKICAgIFtDb2wubmFtZV06IENvbCwKICAgIFtDZWxsLm5hbWVdOiBDZWxsLAogICAgW0NlbGxHcm91cC5uYW1lXTogQ2VsbEdyb3VwLAogICAgW0ZpZWxkLm5hbWVdOiBGaWVsZCwKICAgIFtUb2FzdC5uYW1lXTogVG9hc3QsCiAgICBbVXBsb2FkZXIubmFtZV06IFVwbG9hZGVyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBjaG9vc2VHb29kczogeyBpZDogIiIsIG5hbWU6ICIiLCBwcmljZTogIiIsIHN0b2NrOiAiIiwgaW1hZ2U6IFtdLCBpbWFnZWlkOiAiIiB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYWRkR29vZHMoKSB7CiAgICAgIHZhciBjaG9vc2VHb29kcyA9IHRoaXMuY2hvb3NlR29vZHM7CiAgICAgIGdsb2JhbC5hamF4UG9zdCgKICAgICAgICAiL2FwaS9nb29kc3NlcnZpY2UvY3JlYXRlZ29vZHMvZXhjdXRlIiwKICAgICAgICB7CiAgICAgICAgICBTdG9jazogdGhpcy5jaG9vc2VHb29kcy5zdG9jaywKICAgICAgICAgIE5hbWU6IHRoaXMuY2hvb3NlR29vZHMubmFtZSwKICAgICAgICAgIFByaWNlOiB0aGlzLmNob29zZUdvb2RzLnByaWNlLAogICAgICAgICAgSW1hZ2VJZDogdGhpcy5jaG9vc2VHb29kcy5pbWFnZWlkCiAgICAgICAgfSwKICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBUb2FzdCgi5ZWG5ZOB5paw5aKe5oiQ5YqfIik7CiAgICAgICAgICBjaG9vc2VHb29kcy5zdG9jayA9IDA7CiAgICAgICAgICBjaG9vc2VHb29kcy5wcmljZSA9IDA7CiAgICAgICAgICBjaG9vc2VHb29kcy5uYW1lID0gJyc7CiAgICAgICAgfQogICAgICApOwogICAgfSwKICAgIGNoYW5nZUdvb2RzSW5mbygpIHsKICAgICAgZ2xvYmFsLmFqYXhQb3N0KAogICAgICAgICIvYXBpL2dvb2Rzc2VydmljZS91cGRhdGVnb29kc2Jhc2VpbmZvL2V4Y3V0ZSIsCiAgICAgICAgewogICAgICAgICAgSWQ6IHRoaXMuY2hvb3NlR29vZHMuaWQsCiAgICAgICAgICBOYW1lOiB0aGlzLmNob29zZUdvb2RzLm5hbWUsCiAgICAgICAgICBQcmljZTogdGhpcy5jaG9vc2VHb29kcy5wcmljZQogICAgICAgIH0sCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgVG9hc3QoIuWVhuWTgee8lui+keaIkOWKnyIpOwogICAgICAgIH0KICAgICAgKTsKICAgIH0sCiAgICBjaGFuZ2VHb29kc1N0b2NrKCkgewogICAgICBnbG9iYWwuYWpheFBvc3QoCiAgICAgICAgIi9hcGkvZ29vZHNzZXJ2aWNlL2luY3JlYXNlZ29vZHMvZXhjdXRlIiwKICAgICAgICB7CiAgICAgICAgICBJZDogdGhpcy5jaG9vc2VHb29kcy5pZCwKICAgICAgICAgIFN0b2NrOiB0aGlzLmNob29zZUdvb2RzLnN0b2NrCiAgICAgICAgfSwKICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBUb2FzdCgi5ZWG5ZOB57yW6L6R5oiQ5YqfIik7CiAgICAgICAgfQogICAgICApOwogICAgfSwKICAgIGJhY2soKSB7CiAgICAgIGhpc3RvcnkuYmFjaygtMSk7CiAgICB9LAogICAgYWZ0ZXJSZWFkKGZpbGUpIHsKICAgICAgdGhpcy5jaG9vc2VHb29kcy5pbWFnZSA9IFtdOwogICAgICB0aGlzLmNob29zZUdvb2RzLmltYWdlLnB1c2goeyB1cmw6IGZpbGUuY29udGVudCwgaXNJbWFnZTogdHJ1ZSB9KTsKICAgICAgdmFyIGNob29zZUdvb2RzID0gdGhpcy5jaG9vc2VHb29kczsKICAgICAgZ2xvYmFsLmFqYXhQb3N0KAogICAgICAgICIvYXBpL0dvb2RzU2VydmljZS9TYXZlR29vZHNJbWFnZS9FeGN1dGUiLAogICAgICAgIHsKICAgICAgICAgIEJhc2U2NENvZGU6IGZpbGUuY29udGVudAogICAgICAgIH0sCiAgICAgICAgZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgY2hvb3NlR29vZHMuaW1hZ2VpZCA9IHJlc3VsdC5kYXRhOwogICAgICAgIH0KICAgICAgKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLml0ZW0gIT0gdW5kZWZpbmVkKSB7CiAgICAgIHRoaXMuY2hvb3NlR29vZHMuaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaXRlbS5pZDsKICAgICAgdGhpcy5jaG9vc2VHb29kcy5uYW1lID0gdGhpcy4kcm91dGUucGFyYW1zLml0ZW0ubmFtZTsKICAgICAgdGhpcy5jaG9vc2VHb29kcy5wcmljZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pdGVtLnByaWNlOwogICAgICB0aGlzLmNob29zZUdvb2RzLnN0b2NrID0gdGhpcy4kcm91dGUucGFyYW1zLml0ZW0uc3RvY2s7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/view/manager","sourcesContent":["<template>\r\n  <div>\r\n    <van-nav-bar :title=\"chooseGoods.id!=''?'编辑商品':'新增商品'\" left-text=\"返回\" left-arrow @click-left=\"back()\" />\r\n    <van-cell-group>\r\n      <van-field v-model=\"chooseGoods.name\" required clearable type=\"text\" label=\"商品名\" placeholder=\"请输入商品名\" />\r\n      <van-field v-model=\"chooseGoods.price\" required clearable type=\"number\" label=\"价格\" placeholder=\"请输入价格\" />\r\n      <van-field v-model=\"chooseGoods.stock\" required clearable type=\"number\" label=\"库存\" placeholder=\"请输入库存\" />\r\n      <van-cell>\r\n        <template slot=\"title\">\r\n          <van-uploader v-model=\"chooseGoods.image\" :max-count=\"1\" :after-read=\"afterRead\" />\r\n        </template>\r\n      </van-cell>\r\n\r\n    </van-cell-group>\r\n    <div style=\"margin-top: 10%;\"></div>\r\n    <van-cell-group v-if=\"chooseGoods.id==''\">\r\n      <van-cell>\r\n        <van-button type=\"primary\" block @click=\"addGoods()\">新增商品信息</van-button>\r\n      </van-cell>\r\n    </van-cell-group>\r\n    <van-cell-group v-if=\"chooseGoods.id!=''\">\r\n      <van-cell>\r\n        <van-button type=\"primary\" block @click=\"changeGoodsInfo()\">修改基本信息</van-button>\r\n      </van-cell>\r\n    </van-cell-group>\r\n    <van-cell-group v-if=\"chooseGoods.id!=''\">\r\n      <van-cell>\r\n        <van-button type=\"primary\" block @click=\"changeGoodsStock()\">修改库存信息</van-button>\r\n      </van-cell>\r\n    </van-cell-group>\r\n  </div>\r\n</template>\r\n<script>\r\n  import global from \"../common\";\r\n  import { Button, NavBar, Row, Col, Cell, CellGroup, Field, Toast, Uploader } from \"vant\";\r\n  export default {\r\n    components: {\r\n      [Button.name]: Button,\r\n      [NavBar.name]: NavBar,\r\n      [Row.name]: Row,\r\n      [Col.name]: Col,\r\n      [Cell.name]: Cell,\r\n      [CellGroup.name]: CellGroup,\r\n      [Field.name]: Field,\r\n      [Toast.name]: Toast,\r\n      [Uploader.name]: Uploader\r\n    },\r\n    data: function () {\r\n      return {\r\n        chooseGoods: { id: \"\", name: \"\", price: \"\", stock: \"\", image: [], imageid: \"\" }\r\n      };\r\n    },\r\n    methods: {\r\n      addGoods() {\r\n        var chooseGoods = this.chooseGoods;\r\n        global.ajaxPost(\r\n          \"/api/goodsservice/creategoods/excute\",\r\n          {\r\n            Stock: this.chooseGoods.stock,\r\n            Name: this.chooseGoods.name,\r\n            Price: this.chooseGoods.price,\r\n            ImageId: this.chooseGoods.imageid\r\n          },\r\n          function () {\r\n            Toast(\"商品新增成功\");\r\n            chooseGoods.stock = 0;\r\n            chooseGoods.price = 0;\r\n            chooseGoods.name = '';\r\n          }\r\n        );\r\n      },\r\n      changeGoodsInfo() {\r\n        global.ajaxPost(\r\n          \"/api/goodsservice/updategoodsbaseinfo/excute\",\r\n          {\r\n            Id: this.chooseGoods.id,\r\n            Name: this.chooseGoods.name,\r\n            Price: this.chooseGoods.price\r\n          },\r\n          function () {\r\n            Toast(\"商品编辑成功\");\r\n          }\r\n        );\r\n      },\r\n      changeGoodsStock() {\r\n        global.ajaxPost(\r\n          \"/api/goodsservice/increasegoods/excute\",\r\n          {\r\n            Id: this.chooseGoods.id,\r\n            Stock: this.chooseGoods.stock\r\n          },\r\n          function () {\r\n            Toast(\"商品编辑成功\");\r\n          }\r\n        );\r\n      },\r\n      back() {\r\n        history.back(-1);\r\n      },\r\n      afterRead(file) {\r\n        this.chooseGoods.image = [];\r\n        this.chooseGoods.image.push({ url: file.content, isImage: true });\r\n        var chooseGoods = this.chooseGoods;\r\n        global.ajaxPost(\r\n          \"/api/GoodsService/SaveGoodsImage/Excute\",\r\n          {\r\n            Base64Code: file.content\r\n          },\r\n          function (result) {\r\n            chooseGoods.imageid = result.data;\r\n          }\r\n        );\r\n      }\r\n    },\r\n    mounted() {\r\n      if (this.$route.params.item != undefined) {\r\n        this.chooseGoods.id = this.$route.params.item.id;\r\n        this.chooseGoods.name = this.$route.params.item.name;\r\n        this.chooseGoods.price = this.$route.params.item.price;\r\n        this.chooseGoods.stock = this.$route.params.item.stock;\r\n      }\r\n    }\r\n  };\r\n</script>"]}]}