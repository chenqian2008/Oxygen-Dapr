{"remainingRequest":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\src\\view\\cart\\index.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\src\\view\\cart\\index.vue","mtime":1578140814805},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY2FyZC1nb29kcyB7CiAgcGFkZGluZzogMTBweCAwOwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CgogICZfX2l0ZW0gewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTsKCiAgICAudmFuLWNoZWNrYm94X19sYWJlbCB7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IGF1dG87IC8vIHRlbXAKICAgICAgcGFkZGluZzogMCAxMHB4IDAgMTVweDsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIH0KCiAgICAudmFuLWNoZWNrYm94X19pY29uIHsKICAgICAgdG9wOiA1MCU7CiAgICAgIGxlZnQ6IDEwcHg7CiAgICAgIHotaW5kZXg6IDE7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgbWFyZ2luLXRvcDogLTEwcHg7CiAgICB9CgogICAgLnZhbi1jYXJkX19wcmljZSB7CiAgICAgIGNvbG9yOiAjZjQ0OwogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/cart","sourcesContent":["<template>\n  <div>\n    <van-nav-bar left-arrow @click-left=\"goindex()\" title=\"我的购物车\" />\n    <ul style=\"padding-bottom: 50px;\">\n      <li v-for=\"item in goods\" :key=\"item.id\">\n        <van-cell>\n          <template slot=\"icon\">\n            <van-checkbox v-model=\"item.choose\" @change=\"changeCart()\" />\n            <van-image style=\"margin-left:10px;margin-right:10px\" width=\"100\" height=\"100\" :src=\"item.imageCode\" />\n          </template>\n          <template slot=\"title\">\n            <span class=\"custom-title\">{{item.name}}</span>\n          </template>\n          <template slot=\"label\">\n            <span class=\"custom-title\">￥{{item.price}}</span>\n          </template>\n          <template slot=\"default\">\n            <van-stepper @change=\"changeCart()\" v-model=\"item.count\" />\n          </template>\n        </van-cell>\n      </li>\n    </ul>\n    <van-submit-bar :price=\"checkedGoods.totalPrice\" :disabled=\"!checkedGoods.canSubmit\" button-text=\"结算\"\n      @submit=\"onSubmit\">\n      <van-checkbox v-model=\"checkedGoods.allcheck\" @click=\"chooseALL()\">全选</van-checkbox>\n      <van-button round size=\"small\" style=\"margin-left:10px\" @click=\"clearAll()\" type=\"info\">删除所选</van-button>\n    </van-submit-bar>\n  </div>\n</template>\n\n<script>\n  import global from \"../common\";\n  import {\n    Checkbox,\n    CheckboxGroup,\n    Card,\n    SubmitBar,\n    Toast,\n    Stepper,\n    Cell,\n    Image,\n    NavBar,\n    Button\n  } from \"vant\";\n\n  export default {\n    components: {\n      [Card.name]: Card,\n      [Checkbox.name]: Checkbox,\n      [SubmitBar.name]: SubmitBar,\n      [CheckboxGroup.name]: CheckboxGroup,\n      [Stepper.name]: Stepper,\n      [Cell.name]: Cell,\n      [Image.name]: Image,\n      [NavBar.name]: NavBar,\n      [Button.name]: Button\n    },\n\n    data() {\n      return {\n        checkedGoods: {\n          allcheck: false,\n          totalPrice: 0.0,\n          canSubmit: false\n        },\n        goods: []\n      };\n    },\n    methods: {\n      formatPrice(price) {\n        return (price / 100).toFixed(2);\n      },\n      onSubmit() {\n        //创建订单\n        var GoodsList = [];\n        this.goods.forEach(x => {\n          if (x.choose) GoodsList.push({ GoodsId: x.id, Count: x.count, imageId: x.imageId });\n        });\n        var clearAll = this.clearAll;\n        var router = this.$router;\n        global.ajaxPost(\n          \"/api/OrderService/OrderCreate/Excute\",\n          { GoodsList: GoodsList },\n          function () {\n            clearAll();\n            Toast({\n              message: \"订单创建成功\", duration: 1500, onClose: function () {\n                router.push({ name: \"orderlist\", params: { type: 1 } })\n              }\n            });\n          }\n        );\n      },\n      goindex() {\n        this.$router.push(\"/index\");\n      },\n      chooseALL() {\n        this.checkedGoods.allcheck = !this.checkedGoods.allcheck;\n        if (this.checkedGoods.allcheck) {\n          this.goods.forEach(x => (x.choose = true));\n        } else {\n          this.goods.forEach(x => (x.choose = false));\n        }\n      },\n      changeCart() {\n        global.ResetShopCart(this.goods);\n        this.checkCartState();\n      },\n      clearAll() {\n        global.ClearShopCart(\n          this.goods.filter(function (item) {\n            return item.choose == false;\n          })\n        );\n        this.goods = global.GetShopCart();\n        this.checkCartState();\n      },\n      checkCartState() {\n        var everyResult = this.goods.filter(function (item) {\n          return item.choose == true;\n        });\n        if (everyResult.length > 0) {\n          var sum = 0.0;\n          everyResult.forEach(x => {\n            sum += x.count * x.price;\n          });\n          if (sum > 0) {\n            this.checkedGoods.totalPrice = sum * 100;\n          } else {\n            this.checkedGoods.totalPrice = 0.0;\n          }\n          this.checkedGoods.canSubmit = true;\n        } else {\n          this.checkedGoods.totalPrice = 0.0;\n          this.checkedGoods.canSubmit = false;\n        }\n      }\n    },\n    mounted() {\n      this.goods = global.GetShopCart();\n      this.checkCartState();\n    }\n  };\n</script>\n\n<style lang=\"less\">\n  .card-goods {\n    padding: 10px 0;\n    background-color: #fff;\n\n    &__item {\n      position: relative;\n      background-color: #fafafa;\n\n      .van-checkbox__label {\n        width: 100%;\n        height: auto; // temp\n        padding: 0 10px 0 15px;\n        box-sizing: border-box;\n      }\n\n      .van-checkbox__icon {\n        top: 50%;\n        left: 10px;\n        z-index: 1;\n        position: absolute;\n        margin-top: -10px;\n      }\n\n      .van-card__price {\n        color: #f44;\n      }\n    }\n  }\n</style>"]}]}