{"remainingRequest":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\src\\view\\common.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\src\\view\\common.vue","mtime":1582013356532},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IE5vdGlmeSwgVG9hc3QgfSBmcm9tICJ2YW50IjsKZnVuY3Rpb24gYWpheFBvc3QodXJsLCBkYXRhLCBjYWxsYmFjaykgewogIHZhciBob3N0dXJsID0gImh0dHA6Ly9hcGkub3h5Z2VuLWVzaG9wc2FtcGxlLmNvbSI7CiAgLy8gdmFyIGhvc3R1cmwgPSAiaHR0cDovLzM5LjEwNC4yMjguMjExOjMwMDAxIjsKICBheGlvcwogICAgLnBvc3QoaG9zdHVybCArIHVybCwgZGF0YSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgVG9rZW46IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuIiksCiAgICAgICAgY2FuYXJ5dmVyOiBwcm9jZXNzLmVudi5WVUVfQVBQX0NBTkFSWVZFUgogICAgICB9CiAgICB9KQogICAgLnRoZW4oZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgdmFyIHJlc3VsdCA9IG1lc3NhZ2UuZGF0YTsKICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHsKICAgICAgICBjYWxsYmFjayhyZXN1bHQpOwogICAgICB9IGVsc2UgewogICAgICAgIE5vdGlmeSh7CiAgICAgICAgICB0eXBlOiAiZGFuZ2VyIiwgZHVyYXRpb246IDIwMDAsIG1lc3NhZ2U6IHJlc3VsdC5lcnJNZXNzYWdlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pCiAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIE5vdGlmeSh7IHR5cGU6ICJkYW5nZXIiLCBtZXNzYWdlOiAi57O757uf5byC5bi4LOivt+eojeWQjuWGjeivlSEiIH0pOwogICAgICB3aW5kb3cuY29uc29sZS5sb2coZXJyb3IpOwogICAgfSk7Cn0KZnVuY3Rpb24gbG9naW5PdXQocm91dGVyKSB7CiAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgidG9rZW4iKTsKICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VySW5mbyIpOwogIFRvYXN0KHsKICAgIG1lc3NhZ2U6ICLpgIDlh7rnmbvlvZXmiJDlip8iLAogICAgZHVyYXRpb246IDEwMDAsCiAgICBvbkNsb3NlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0KICB9KTsKfQpmdW5jdGlvbiBiYWNrKCkgewogIGhpc3RvcnkuYmFjaygtMSk7Cn0KZnVuY3Rpb24gR2V0VXNlckluZm8oY2FsbGJhY2spIHsKICB2YXIgdXNlcnN0ciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJJbmZvIik7CiAgaWYgKHVzZXJzdHIgPT0gbnVsbCB8fCB1c2Vyc3RyID09IHVuZGVmaW5lZCkgewogICAgY2FsbGJhY2soe30pOwogIH0KICBlbHNlIHsKICAgIHZhciB1c2VyID0gSlNPTi5wYXJzZSh1c2Vyc3RyKTsKICAgIGFqYXhQb3N0KAogICAgICAiL2FwaS90cmFkZXNlcnZpY2UvZ2V0bXlhY2NvdW50YmFsYW5jZS9xdWVyeSIsCiAgICAgIHt9LAogICAgICBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgdXNlci5CYWxhbmNlID0gcmVzdWx0LmRhdGEuYmFsYW5jZTsKICAgICAgICB1c2VyLkJhbGFuY2VSZWNvcmQgPSByZXN1bHQuZGF0YS5yZWNvcmRzOwogICAgICAgIGNhbGxiYWNrKHVzZXIpOwogICAgICB9CiAgICApOwogIH0KfQpmdW5jdGlvbiBHZXRTaG9wQ2FydCgpIHsKICB2YXIgY2FydGxpc3QgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJjYXJ0Iik7CiAgaWYgKGNhcnRsaXN0ID09IG51bGwgfHwgY2FydGxpc3QgPT0gdW5kZWZpbmVkIHx8IGNhcnRsaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICByZXR1cm4gW107CiAgfQogIGVsc2UgewogICAgcmV0dXJuIEpTT04ucGFyc2UoY2FydGxpc3QpOwogIH0KfQpmdW5jdGlvbiBDbGVhclNob3BDYXJ0KGxpc3QpIHsKICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJjYXJ0IiwgSlNPTi5zdHJpbmdpZnkobGlzdCkpOwp9CmZ1bmN0aW9uIFJlc2V0U2hvcENhcnQobGlzdCkgewogIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImNhcnQiLCBKU09OLnN0cmluZ2lmeShsaXN0KSk7Cn0KZnVuY3Rpb24gQWRkU2hvcENhcnQoaXRlbSkgewogIHZhciBjYXJ0bGlzdCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImNhcnQiKTsKICBpZiAoY2FydGxpc3QgPT0gbnVsbCB8fCBjYXJ0bGlzdCA9PSB1bmRlZmluZWQpIHsKICAgIGNhcnRsaXN0ID0gW107CiAgfQogIGVsc2UgewogICAgY2FydGxpc3QgPSBKU09OLnBhcnNlKGNhcnRsaXN0KTsKICB9CiAgdmFyIGFkZCA9IHRydWU7CiAgY2FydGxpc3QuZm9yRWFjaCh4ID0+IHsKICAgIGlmICh4LmlkID09IGl0ZW0uaWQpIHsKICAgICAgYWRkID0gZmFsc2U7CiAgICAgIHguY291bnQgKz0gMTsKICAgICAgaWYgKHguY2hvb3NlKQogICAgICAgIHguY2hvb3NlID0gdHJ1ZTsKICAgICAgZWxzZQogICAgICAgIHguY2hvb3NlID0gaXRlbS5jaG9vc2U7CiAgICB9CiAgfSk7CiAgaWYgKGFkZCkKICAgIGNhcnRsaXN0LnB1c2goaXRlbSk7CiAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgKICAgICJjYXJ0IiwKICAgIEpTT04uc3RyaW5naWZ5KGNhcnRsaXN0KQogICk7Cn0KZnVuY3Rpb24gR2V0SW1hZ2VCeUlkKGlkLCBjYWxsYmFjaykgewogIGFqYXhQb3N0KCIvYXBpL0dvb2RzU2VydmljZS9HZXRHb29kc0ltYWdlL1F1ZXJ5IiwKICAgIHsgSWQ6IGlkIH0sCiAgICBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgIGNhbGxiYWNrKHJlc3VsdC5kYXRhKTsKICAgIH0KICApOwp9CmV4cG9ydCBkZWZhdWx0IHsKICBhamF4UG9zdCwKICBiYWNrLAogIEdldFVzZXJJbmZvLAogIGxvZ2luT3V0LAogIEFkZFNob3BDYXJ0LAogIEdldFNob3BDYXJ0LAogIENsZWFyU2hvcENhcnQsCiAgUmVzZXRTaG9wQ2FydCwKICBHZXRJbWFnZUJ5SWQsCiAgbWV0aG9kczogewogICAgZ2V0ZGZSb3V0ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZXI7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["common.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"common.vue","sourceRoot":"src/view","sourcesContent":["<script>\r\n  import axios from \"axios\";\r\n  import { Notify, Toast } from \"vant\";\r\n  function ajaxPost(url, data, callback) {\r\n    var hosturl = \"http://api.oxygen-eshopsample.com\";\r\n    // var hosturl = \"http://39.104.228.211:30001\";\r\n    axios\r\n      .post(hosturl + url, data, {\r\n        headers: {\r\n          Token: sessionStorage.getItem(\"token\"),\r\n          canaryver: process.env.VUE_APP_CANARYVER\r\n        }\r\n      })\r\n      .then(function (message) {\r\n        var result = message.data;\r\n        if (result.code == 0) {\r\n          callback(result);\r\n        } else {\r\n          Notify({\r\n            type: \"danger\", duration: 2000, message: result.errMessage\r\n          });\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        Notify({ type: \"danger\", message: \"系统异常,请稍后再试!\" });\r\n        window.console.log(error);\r\n      });\r\n  }\r\n  function loginOut(router) {\r\n    sessionStorage.removeItem(\"token\");\r\n    sessionStorage.removeItem(\"userInfo\");\r\n    Toast({\r\n      message: \"退出登录成功\",\r\n      duration: 1000,\r\n      onClose: function () {\r\n        router.push(\"/login\");\r\n      }\r\n    });\r\n  }\r\n  function back() {\r\n    history.back(-1);\r\n  }\r\n  function GetUserInfo(callback) {\r\n    var userstr = sessionStorage.getItem(\"userInfo\");\r\n    if (userstr == null || userstr == undefined) {\r\n      callback({});\r\n    }\r\n    else {\r\n      var user = JSON.parse(userstr);\r\n      ajaxPost(\r\n        \"/api/tradeservice/getmyaccountbalance/query\",\r\n        {},\r\n        function (result) {\r\n          user.Balance = result.data.balance;\r\n          user.BalanceRecord = result.data.records;\r\n          callback(user);\r\n        }\r\n      );\r\n    }\r\n  }\r\n  function GetShopCart() {\r\n    var cartlist = sessionStorage.getItem(\"cart\");\r\n    if (cartlist == null || cartlist == undefined || cartlist.length == 0) {\r\n      return [];\r\n    }\r\n    else {\r\n      return JSON.parse(cartlist);\r\n    }\r\n  }\r\n  function ClearShopCart(list) {\r\n    sessionStorage.setItem(\"cart\", JSON.stringify(list));\r\n  }\r\n  function ResetShopCart(list) {\r\n    sessionStorage.setItem(\"cart\", JSON.stringify(list));\r\n  }\r\n  function AddShopCart(item) {\r\n    var cartlist = sessionStorage.getItem(\"cart\");\r\n    if (cartlist == null || cartlist == undefined) {\r\n      cartlist = [];\r\n    }\r\n    else {\r\n      cartlist = JSON.parse(cartlist);\r\n    }\r\n    var add = true;\r\n    cartlist.forEach(x => {\r\n      if (x.id == item.id) {\r\n        add = false;\r\n        x.count += 1;\r\n        if (x.choose)\r\n          x.choose = true;\r\n        else\r\n          x.choose = item.choose;\r\n      }\r\n    });\r\n    if (add)\r\n      cartlist.push(item);\r\n    sessionStorage.setItem(\r\n      \"cart\",\r\n      JSON.stringify(cartlist)\r\n    );\r\n  }\r\n  function GetImageById(id, callback) {\r\n    ajaxPost(\"/api/GoodsService/GetGoodsImage/Query\",\r\n      { Id: id },\r\n      function (result) {\r\n        callback(result.data);\r\n      }\r\n    );\r\n  }\r\n  export default {\r\n    ajaxPost,\r\n    back,\r\n    GetUserInfo,\r\n    loginOut,\r\n    AddShopCart,\r\n    GetShopCart,\r\n    ClearShopCart,\r\n    ResetShopCart,\r\n    GetImageById,\r\n    methods: {\r\n      getdfRouter() {\r\n        return this.$router;\r\n      }\r\n    }\r\n  };\r\n</script>"]}]}