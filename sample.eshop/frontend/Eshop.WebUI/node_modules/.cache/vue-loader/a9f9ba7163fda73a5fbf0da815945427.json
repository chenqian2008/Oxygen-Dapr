{"remainingRequest":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\src\\view\\user\\order\\orderlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\src\\view\\user\\order\\orderlist.vue","mtime":1578147349502},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\dotnet_project\\Oxygen-EshopSample\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgQ2hlY2tib3gsCiAgQ2hlY2tib3hHcm91cCwKICBDYXJkLAogIEJ1dHRvbiwKICBOYXZCYXIsCiAgVG9hc3QsCiAgRGlhbG9nLAogIFRhYiwKICBUYWJzLAogIFBhbmVsCn0gZnJvbSAidmFudCI7CmltcG9ydCBnbG9iYWwgZnJvbSAiLi4vLi4vY29tbW9uIjsKaW1wb3J0IG9yZGVybGlzdFRtcCBmcm9tICIuL09yZGVydGVtcGxhdGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgW0NhcmQubmFtZV06IENhcmQsCiAgICBbQ2hlY2tib3gubmFtZV06IENoZWNrYm94LAogICAgW0NoZWNrYm94R3JvdXAubmFtZV06IENoZWNrYm94R3JvdXAsCiAgICBbQnV0dG9uLm5hbWVdOiBCdXR0b24sCiAgICBbTmF2QmFyLm5hbWVdOiBOYXZCYXIsCiAgICBbVG9hc3QubmFtZV06IFRvYXN0LAogICAgW0RpYWxvZy5uYW1lXTogRGlhbG9nLAogICAgW1RhYnMubmFtZV06IFRhYnMsCiAgICBbVGFiLm5hbWVdOiBUYWIsCiAgICBbUGFuZWwubmFtZV06IFBhbmVsLAogICAgb3JkZXJsaXN0VG1wCiAgfSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmU6IDAsCiAgICAgIG9yZGVybGlzdDogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBiYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3VzZXIiKTsKICAgIH0sCiAgICBnZXRvcmRlcigpIHsKICAgICAgdGhpcy5vcmRlcmxpc3QgPSBbXTsKICAgICAgdmFyIG9yZGVybGlzdCA9IHRoaXMub3JkZXJsaXN0OwogICAgICBnbG9iYWwuYWpheFBvc3QoCiAgICAgICAgIi9hcGkvb3JkZXJzZXJ2aWNlL2dldG9yZGVybGlzdGJ5dXNlci9xdWVyeSIsCiAgICAgICAgewogICAgICAgICAgT3JkZXJUeXBlOiB0aGlzLmFjdGl2ZSwKICAgICAgICAgIE9yZGVyUGFybXM6IFsKICAgICAgICAgICAgeyBPcmRlck5hbWU6ICJTdGF0ZSIsIElzQXNjOiB0cnVlIH0sCiAgICAgICAgICAgIHsgT3JkZXJOYW1lOiAiQ3JlYXRlVGltZSIsIElzQXNjOiBmYWxzZSB9CiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICByZXN1bHQuZGF0YS5mb3JFYWNoKHggPT4gewogICAgICAgICAgICB2YXIgaXRlbSA9IHsKICAgICAgICAgICAgICBjcmVhdGVUaW1lOiB4LmNyZWF0ZVRpbWUsCiAgICAgICAgICAgICAgaWQ6IHguaWQsCiAgICAgICAgICAgICAgb3JkZXJJdGVtczogW10sCiAgICAgICAgICAgICAgb3JkZXJMb2dzOiB4Lm9yZGVyTG9ncywKICAgICAgICAgICAgICBvcmRlck5vOiB4Lm9yZGVyTm8sCiAgICAgICAgICAgICAgc3RhdGU6IHguc3RhdGUsCiAgICAgICAgICAgICAgdGltZTogeC50aW1lLAogICAgICAgICAgICAgIHRvdGFsUHJpY2U6IHgudG90YWxQcmljZQogICAgICAgICAgICB9OwogICAgICAgICAgICB4Lm9yZGVySXRlbXMuZm9yRWFjaCh5ID0+IHsKICAgICAgICAgICAgICB2YXIgb3JkZXJpdGVtID0gewogICAgICAgICAgICAgICAgY291bnQ6IHkuY291bnQsCiAgICAgICAgICAgICAgICBpbWFnZUNvZGU6ICIiLAogICAgICAgICAgICAgICAgaW1hZ2VJZDogeS5pbWFnZUlkLAogICAgICAgICAgICAgICAgbmFtZTogeS5uYW1lLAogICAgICAgICAgICAgICAgc2luZ2xlUHJpY2U6IHkuc2luZ2xlUHJpY2UsCiAgICAgICAgICAgICAgICB0b3RhbFByaWNlOiB5LnRvdGFsUHJpY2UKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaXRlbS5vcmRlckl0ZW1zLnB1c2gob3JkZXJpdGVtKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9yZGVybGlzdC5wdXNoKGl0ZW0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBvcmRlcmxpc3QuZm9yRWFjaCh4ID0+IHgub3JkZXJJdGVtcy5mb3JFYWNoKHkgPT4gewogICAgICAgICAgICBnbG9iYWwuR2V0SW1hZ2VCeUlkKHkuaW1hZ2VJZCwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICB5LmltYWdlQ29kZSA9IGRhdGE7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy50eXBlICE9IG51bGwgJiYgdGhpcy4kcm91dGUucGFyYW1zLnR5cGUgIT0gdW5kZWZpbmVkKQogICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy50eXBlOwogICAgdGhpcy5nZXRvcmRlcigpOwogIH0KfTsK"},{"version":3,"sources":["orderlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orderlist.vue","sourceRoot":"src/view/user/order","sourcesContent":["<template>\r\n  <div>\r\n    <van-nav-bar title=\"我的订单\" left-arrow @click-left=\"back()\" />\r\n    <van-tabs v-model=\"active\" @change=\"getorder\" animated>\r\n      <van-tab title=\"全部\">\r\n        <orderlistTmp v-bind:orderlist=\"orderlist\"></orderlistTmp>\r\n      </van-tab>\r\n      <van-tab title=\"待付款\">\r\n        <orderlistTmp v-bind:orderlist=\"orderlist\"></orderlistTmp>\r\n      </van-tab>\r\n      <van-tab title=\"已完成\">\r\n        <orderlistTmp v-bind:orderlist=\"orderlist\"></orderlistTmp>\r\n      </van-tab>\r\n      <van-tab title=\"已关闭\">\r\n        <orderlistTmp v-bind:orderlist=\"orderlist\"></orderlistTmp>\r\n      </van-tab>\r\n    </van-tabs>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {\r\n    Checkbox,\r\n    CheckboxGroup,\r\n    Card,\r\n    Button,\r\n    NavBar,\r\n    Toast,\r\n    Dialog,\r\n    Tab,\r\n    Tabs,\r\n    Panel\r\n  } from \"vant\";\r\n  import global from \"../../common\";\r\n  import orderlistTmp from \"./Ordertemplate\";\r\n  export default {\r\n    components: {\r\n      [Card.name]: Card,\r\n      [Checkbox.name]: Checkbox,\r\n      [CheckboxGroup.name]: CheckboxGroup,\r\n      [Button.name]: Button,\r\n      [NavBar.name]: NavBar,\r\n      [Toast.name]: Toast,\r\n      [Dialog.name]: Dialog,\r\n      [Tabs.name]: Tabs,\r\n      [Tab.name]: Tab,\r\n      [Panel.name]: Panel,\r\n      orderlistTmp\r\n    },\r\n    data: function () {\r\n      return {\r\n        active: 0,\r\n        orderlist: []\r\n      };\r\n    },\r\n    methods: {\r\n      back() {\r\n        this.$router.push(\"/user\");\r\n      },\r\n      getorder() {\r\n        this.orderlist = [];\r\n        var orderlist = this.orderlist;\r\n        global.ajaxPost(\r\n          \"/api/orderservice/getorderlistbyuser/query\",\r\n          {\r\n            OrderType: this.active,\r\n            OrderParms: [\r\n              { OrderName: \"State\", IsAsc: true },\r\n              { OrderName: \"CreateTime\", IsAsc: false }\r\n            ]\r\n          },\r\n          function (result) {\r\n            result.data.forEach(x => {\r\n              var item = {\r\n                createTime: x.createTime,\r\n                id: x.id,\r\n                orderItems: [],\r\n                orderLogs: x.orderLogs,\r\n                orderNo: x.orderNo,\r\n                state: x.state,\r\n                time: x.time,\r\n                totalPrice: x.totalPrice\r\n              };\r\n              x.orderItems.forEach(y => {\r\n                var orderitem = {\r\n                  count: y.count,\r\n                  imageCode: \"\",\r\n                  imageId: y.imageId,\r\n                  name: y.name,\r\n                  singlePrice: y.singlePrice,\r\n                  totalPrice: y.totalPrice\r\n                }\r\n                item.orderItems.push(orderitem);\r\n              });\r\n              orderlist.push(item);\r\n            });\r\n            orderlist.forEach(x => x.orderItems.forEach(y => {\r\n              global.GetImageById(y.imageId, function (data) {\r\n                y.imageCode = data;\r\n              });\r\n\r\n            }));\r\n          }\r\n        );\r\n      }\r\n    },\r\n    mounted() {\r\n      if (this.$route.params.type != null && this.$route.params.type != undefined)\r\n        this.active = this.$route.params.type;\r\n      this.getorder();\r\n    }\r\n  };\r\n</script>"]}]}